= render :partial => "shared/header"
%main.container
  %a.general-back-link{href: '#', :onclick => 'handleBack(event)'}
    %i.fa.fa-long-arrow-left.mr-15
    Back to results
  .row
    .col-sm-6
      .product-gallery
        .mb-20
          %img.img-responsive{src: @book.cover_url}
    .col-sm-6
      %h1.mt-res-0= @book.title
      %p.lead.small= "#{@book.author.first_name} #{@book.author.last_name}"
      .row
        .col-xs-12.col-md-4
          %p.h1.in-gold-500.mt-10= Money.new(@book.price, 'USD').format
        .col-xs-5.col-md-3
          .input-group.general-position
            %a.input-link.decrease-quantity{href: '#'}
              %i.fa.fa-minus.line-height-40
            %input.form-control.quantity-input{type: "text", value: 1}
            %a.input-link.increase-quantity{href: "#"}
              %i.fa.fa-plus.line-height-40
        .col-xs-7.col-md-5
          %button.btn.btn-default.pull-right.general-position Add to Cart
      .general-info-wrap.divider-lg
        %p Description
        %p.lead.small.line-height-2
          %div.book-description
            = @book.description
          %a.in-gold-500.ml-10.read-more-link{href: "#"} Read More
  - if customer_signed_in?
    .mb-80
      %h3 Write a Review
      %form.row
        .col-md-8
          .mb-40
            .form-group
              %label.control-label.input-label.in-grey-600{for: "title"} Title
              %input#title.form-control{name:"title", type: "text"}
            .form-group
              %label.control-label.input-label.in-grey-600{for: "review"} Review
              %textarea#review.form-control{name:"review", type: "text"}
          .text-right
            %button.btn.disabled.mb-20 Post
  
  .mb-80
    %h3.in-gold-500.mb-25 Reviews (3)
    .general-message-wrap.divider-lg
      .clearfix
        %img.img-circle.logo-size.inlide-block.pull-left{src: "https://www.smashingmagazine.com/wp-content/uploads/2015/09/smashing-book-5-2-large.jpg"}
        .ml-70
          %div
            .general-message-date.hidden-xs 11/11/16
            .max-240
              .general-message-verified Verified Reviewer
              .general-message-name Rita J. Lewis
          .mb-15
            %i.fa.fa-star.rate-star
            %i.fa.fa-star.rate-star
            %i.fa.fa-star.rate-star
            %i.fa.fa-star.rate-star
            %i.fa.fa-star.rate-star
          %p Thank you BookStore, I was very pleased to receive my order for the Moleskine diary so soon after placing the order.
    .general-message-wrap.divider-lg
      .clearfix
        %span.img-circle.logo-size.inlide-block.pull-left.logo-empty M
        .ml-70
          %div
            .general-message-date.hidden-xs 11/11/16
            .max-240
              .general-message-verified.pull-right Verified Reviewer
              .general-message-name May J. Novoa
          .mb-15
            %i.fa.fa-star.rate-star
            %i.fa.fa-star.rate-star
            %i.fa.fa-star.rate-star
            %i.fa.fa-star.rate-star
            %i.fa.fa-star.rate-star.rate-empty
          %p If ‘Get a better job’ had landed on my desk a year ago, I might have been dismissive of it. Instead I was prepared to be open-minded. There have been many occasions where I turned to career books with practical activities to look for some inspiration when developing education activities for learners or assessment.
= render :partial => "shared/footer"

-# Read more
:javascript
  const book_description = document.querySelector('.book-description')
  const read_more = document.querySelector('.read-more-link')
  const full_text = book_description.innerText
  book_description.innerText = full_text.slice(0, 300)

  read_more.addEventListener('click', expand)

  function expand(e) {
    e.preventDefault()
    book_description.innerText = full_text;
    read_more.classList.add('hidden')
  }

-# Quantity handling
:javascript
  const input = document.querySelector('.quantity-input');

  document.querySelector('.increase-quantity').addEventListener('click', (e) => {
    e.preventDefault();

    input.value = Number(input.value) + 1;
  })

  document.querySelector('.decrease-quantity').addEventListener('click', (e) => {
    e.preventDefault();

    input.value = (Number(input.value) - 1) || 1;
  })

:javascript
  function handleBack(e){
    e.preventDefault();
    history.back();
  }
