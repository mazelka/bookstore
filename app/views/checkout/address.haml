%main.container
  = render :partial => "checkout_steps", :formats => [:html]
  - if @order && @order.errors.any?
    - @order.errors.full_messages.each do |message|
      %li= message
  .hidden-xs.hidden-sm.res-mb-100
    .row
      .col-md-5
        %h3.general-subtitle= t('address.shipping_address')
        %p.general-info-text= t('address.all_fields_required')
      .col-md-5.col-md-offset-1
        %h3.general-subtitle= t('address.billing_address')
        %p.form-group.checkbox
          %label.checkbox-label
            %input.checkbox-input.test-class{type: "checkbox", hidden: "true", name: 'billing'}
            %span.checkbox-icon
              %i.fa.fa-check
            %span.checkbox-text= t('address.use_shipping_address')
  = render partial: 'shared/address', locals: {resource: @order, url: wizard_path}
  .general-text-align.mb-60
    %p.in-gold-500.font-18= t('order.order_summary')
    %table.general-summary-table
      %tr
        %td
          %p.font-16= t('order.item_total')
        %td
          %p.font-16= @cart_details.subtotal
      %tr
        %td
          %p.font-16= t('order.order_total')
        %td
          %p.font-16= @cart_details.total

-# Billing address handling
:javascript
  function hideBillingAddress() {
    let billingSection = document.querySelector('.billing-section');
    let billingCheckbox = document.querySelector("input[name=billing]")

    billingCheckbox.addEventListener('click', (e) => {

      billingSection.classList.contains('hidden') ? billingSection.classList.remove('hidden') : billingSection.classList.add('hidden')
    })
  }

  // hideBillingAddress();

  function handleBillingAddress(e) {
    let billingCheckbox = document.querySelector("input[name=billing]")

    if (billingCheckbox.checked) {
      document.getElementById('billing_address_attributes_address_line').value = document.getElementById('shipping_address_attributes_address_line').value
      document.getElementById('billing_address_attributes_country').value = document.getElementById('shipping_address_attributes_country').value
      document.getElementById('billing_address_attributes_city').value = document.getElementById('shipping_address_attributes_city').value
      document.getElementById('billing_address_attributes_zip').value = document.getElementById('shipping_address_attributes_zip').value
      document.getElementById('billing_address_attributes_phone').value = document.getElementById('shipping_address_attributes_phone').value
    }
  }

